# c/cpp笔记

* cpp多态如何实现
* 什么是封装，面向对象和面向过程有什么区别
  * 封装是把数据和操作数据的方法绑定起来，对数据的访问只能通过已定义的接口。封装就是隐藏一切可隐藏的东西，只向外界提供最简单的编程接口
  * 面向过程就是分析出解决问题所需要的步骤，然后用函数把这些步骤一步一步实现，使用的时候一个一个依次调用就可以了。面向对象是把构成问题事务分解成各个对象，建立对象的目的不是为了完成一个步骤，而是为了描叙某个事物在整个解决问题的步骤中的行为
  * 面向过程是编年体；面向对象是纪传体
* cpp文件是怎么运行起来的
  * cpp语言要想运行起来，就要通过翻译环境把 .cpp 文件翻译成机器可以识别的机器码
  * cpp 翻译过程可以分为编译和链接两个阶段
  * 编译分为预编译、编译、汇编
    * 预编译是文件操作，将头文件包含，删除注释，宏定义替换，.c 文件经过预编译成为 .i 文件
    * 编译是将源代码翻译成汇编代码，包括词法分析、语法分析、语义分析、源代码优化、代码生成和目标代码优化。.i 编译成 .s 文件
    * 汇编是将汇编代码翻译成机器代码，.s 汇编成 .o 文件
  * 链接是符号表的合并和重定义
    * 生成 .exe 文件
* cpp文件运行时的堆和栈
  * 栈区是分配局部变量的空间，栈的空间是自动分配自动回收的，生存周期只在函数的运行过程；由系统分配，速度较快；栈地址向小地址增长
  * 堆由 new 分配，需要手动回收空间，否则造成内存泄漏，分配速度较慢
* 设计一个类，只能生成该类的一个实例
* 智能指针
* struct和class的区别

## 虚函数

* **虚函数的具体实现原理**
* c++虚函数
  * 虚函数是一种在基类定义为virtual的函数，并在一个或多个派生类中再定义的函数。虚函数的特点是，只要定义一个基类的指针，就可以指向派生类的对象。
  * 注：无虚函数时，遵循以下规则：C++规定，定义为基类的指针，也能作指向派生类的指针使用，并可以用这个指向派生类对象的指针访问继承来的基类成员；但不能用它访问派生类的成员
  * 使用虚函数实现运行时的多态性的关键在于：必须通过基类指针访问这些函数
  * 含有纯虚函数的基类称为抽象基类。抽象基类又一个重要特性：抽象类不能建立对象。但是抽象基类可以有指向自己的指针，以支持运行时的多态性。
  * 它虚就虚在所谓“推迟联编”或者“动态联编”上，一个类函数的调用并不是在编译时刻被确定的，而是在运行时刻被确定的。由于编写代码的时候并不能确定被调用的是基类的函数还是哪个派生类的函数，所以被成为“虚”函数。
  * 纯虚函数一定没有定义，纯虚函数用来规范派生类的行为，即接口。包含纯虚函数的类是抽象类

* c++ 析构函数为何需要使用Visual修饰
  * C++中基类采用virtual虚析构函数是为了防止内存泄漏
  * 如果派生类中申请了内存空间，并在其析构函数中对这些内存空间进行释放。假设基类中采用的是非虚析构函数，当删除基类指针指向的派生类对象时就不会触发动态绑定，因而只会调用基类的析构函数，而不会调用派生类的析构函数。那么在这种情况下，派生类中申请的空间就得不到释放从而产生内存泄漏

## STL

* map数据结构，时间复杂度

## 内存

* **c++内存管理模型**
* stl内存分配
* c++内存
  * c++内存分为栈、堆、程序代码区、静态区、文字常量区
  * 栈存放临时变量、函数
  * 堆存放new的对象
  * 虚函数表在静态区

* 参考书籍《深度探索c++对象模型》